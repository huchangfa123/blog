{% extends './base.html' %}
{% block body %}
  <h1>首页</h1>
  <div id = "paperlist">
   <table class="table">
     <thead>
       <th>标题</th>
       <th>类型</th>
       <th>更新时间</th>
     </thead>
     <tbody id = "listPlace">
     </tbody>
   </table>
  </div>
  <script>
    $(function(){
      var paperlist = [];
      $.get('/getPaperlist',function(data, status){
        if (status){
          paperlist = data.data
          //alert(data.data[0].title);
          for (let i = 0; i < data.data.length; i++)
            $("#listPlace").append("<tr id=\"" + data.data[i]._id + "\">" +
                                   "<td>"+ data.data[i].title + "</td>"+
                                   "<td>"+ 1 + "</td>" + 
                                   "<td>"+ 2 + "</td>"
                                   + "</tr>")
        }
        for(let i = 0; i < paperlist.length; i ++ ){
        $("#" + paperlist[i]._id).dblclick(function(){
          const url = "/reading?id=" + (paperlist[i]._id).toString()
          window.location.href = url
        })
      }
      })
   
    })
  </script>
{% endblock %}